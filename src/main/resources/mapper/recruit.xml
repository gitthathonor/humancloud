<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="site.metacoding.humancloud.domain.recruit.RecruitDao">

	<select id="orderByCreatedAt" resultType="site.metacoding.humancloud.domain.recruit.Recruit">
		select *
		from recruit
		order by recruit_created_at desc
	</select>

	<select id="orderByCareer" resultType="site.metacoding.humancloud.domain.recruit.Recruit">
		select * from recruit order by
								 (
									 CASE WHEN ASCII(SUBSTRING(recruit_career,1)) BETWEEN 48 AND 57 THEN 3
										  WHEN ASCII(SUBSTRING(recruit_career,1))
      <![CDATA[<]]>
											   123 THEN 2 ELSE 1 END
									 ), binary(recruit_career)
	</select>
	<insert id="save" useGeneratedKeys="true" keyProperty="recruitId">
		INSERT INTO recruit(recruit_title, recruit_career, recruit_salary, recruit_location, recruit_content, recruit_read_count, recruit_company_id, recruit_created_at) 
		VALUES(#{recruitTitle}, #{recruitCareer}, #{recruitSalary},#{recruitLocation}, #{recruitContent}, #{recruitReadCount}, #{recruitCompanyId}, NOW())
	</insert>

	<select id="findById" resultType="site.metacoding.humancloud.domain.recruit.Recruit">
	select * from recruit 
	WHERE recruit_id = #{recruitId}
	</select>
	<select id="findByCompanyId" resultType="site.metacoding.humancloud.domain.recruit.Recruit">
		SELECT *
		FROM recruit WHERE recruit_company_id = #{recruitCompanyId}
	</select>
	<select id="findAll" resultType="site.metacoding.humancloud.domain.recruit.Recruit">
		select * from recruit
	
	select * from recruit
	</select>
	<update id="update"></update>
	<delete id="deleteById"></delete>
</mapper>